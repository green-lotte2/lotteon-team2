<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/UserLayout}">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-HQW2HX38VH"></script>
        <script>
            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());

            gtag('config', 'G-HQW2HX38VH');


            window.onload = function () {
                let Top = document.getElementById('top');

                if (Top) {
                    Top.style.display = 'none'
                    window.addEventListener('scroll', function () {
                        if (window.scrollY > 300) {
                            Top.style.display = 'block';
                            console.log(Top);
                        } else {
                            Top.style.display = 'none';
                        }
                    });

                    Top.addEventListener('click', function (e) {
                        e.preventDefault();
                        window.scrollTo({top: 0, behavior: 'smooth'});
                        console.log(Top);
                     });
                } else {
                    console.log("#top 요소를 찾을 수 없습니다.");
                }
            }

        </script>
        <meta charset="UTF-8"/>
        <link rel="shortcut icon" type="image/x-icon" th:href="@{/images/favicon.ico}"/>
        <link rel="stylesheet"
              href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css"/>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css"/>
        <link rel="stylesheet" href="./css/common.css"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
        <script src="https://kit.fontawesome.com/20962f3e4b.js" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>
        <script th:src="@{/js/index.js}"></script>

    </head>

    <body>
        <!--
          배너 상단 이미지 추가 고려
        -->
        <div id="bannerTop" class="on" style="background: #e4dfdf;">
            <article>
                <a href="#"><img th:src="@{/images/topBanner1.png}"/></a>
                <button class="btnClose">close</button>
            </article>
        </div>


        <!-- 카테고리/베스트 상품 영역 -->

        <section layout:fragment="content">

            <!-- 슬라이더 영역 -->

            <section class="slider">
                <ul>
                    <li>
                        <a href="#">
                            <img th:src="@{/images/slider_item1.jpg}" alt="item1"/>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img th:src="@{/images/slider_item2.jpg}" alt="item2"/>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img th:src="@{/images/slider_item3.jpg}" alt="item3"/>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img th:src="@{/images/slider_item4.jpg}" alt="item4"/>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img th:src="@{/images/slider_item5.jpg}" alt="item5" />
                        </a>
                    </li>
                </ul>
            </section>
            <!-- 히트상품 영역 -->
            <section class="hit">
                <h3><span>히트상품</span></h3>

                <article th:each="product:${hitProduct}">
                    <a th:href="@{/product/view(pno=${product.pno})}">
                        <div class="thumb">
                            <img th:src="@{|/product/${product.cate}/${product.mainimg}|}" alt="상품이미지">
                        </div>
                        <h2>[[${product.pname}]]</h2>
                        <p>[[${product.info}]]</p>
                        <div class="org_price">
                            <del>[[${#numbers.formatInteger(product.price, 0, 'COMMA')}]]</del>
                            <span>[[${#numbers.formatInteger(product.discount, 0, 'COMMA')}]]%</span>
                        </div>
                        <div class="dis_price">
                            <ins>[[${#numbers.formatInteger(product.price * (1 - product.discount / 100.0), 0, 'COMMA')}]]</ins>
                            <span th:if="${product.deliprice == 0}" class="free">무료배송</span>
                        </div>
                    </a>
                </article>
            </section>
            <!-- 추천상품 영역 -->
            <section class="recommend">
                <h3><span>추천상품</span></h3>

                <article th:each="product:${recommendProduct}">
                    <a th:href="@{/product/view(pno=${product.pno})}">
                        <div class="thumb">
                            <img th:src="@{|/product/${product.cate}/${product.mainimg}|}" alt="상품이미지">
                        </div>
                        <h2>[[${product.pname}]]</h2>
                        <p>[[${product.info}]]</p>
                        <div class="org_price">
                            <del>[[${#numbers.formatInteger(product.price, 0, 'COMMA')}]]</del>
                            <span>[[${#numbers.formatInteger(product.discount, 0, 'COMMA')}]]%</span>
                        </div>
                        <div class="dis_price">
                            <ins>[[${#numbers.formatInteger(product.price * (1 - product.discount / 100.0), 0, 'COMMA')}]]</ins>
                            <span th:if="${product.deliprice == 0}" class="free">무료배송</span>
                        </div>
                    </a>
                </article>
            </section>
            <!-- 최신상품 영역 -->
            <section class="new">
                <h3><span>최신상품</span></h3>

                <article th:each="product:${newProduct}">
                    <a th:href="@{/product/view(pno=${product.pno})}">
                        <div class="thumb">
                            <img th:src="@{|/product/${product.cate}/${product.mainimg}|}" alt="상품이미지">
                        </div>
                        <h2>[[${product.pname}]]</h2>
                        <p>[[${product.info}]]</p>
                        <div class="org_price">
                            <del>[[${#numbers.formatInteger(product.price, 0, 'COMMA')}]]</del>
                            <span>[[${#numbers.formatInteger(product.discount, 0, 'COMMA')}]]%</span>
                        </div>
                        <div class="dis_price">
                            <ins>[[${#numbers.formatInteger(product.price * (1 - product.discount / 100.0), 0, 'COMMA')}]]</ins>
                            <span th:if="${product.deliprice == 0}" class="free">무료배송</span>
                        </div>
                    </a>
                </article>
            </section>
            <!-- 할인상품 영역 -->
            <section class="discount">
                <h3><span>할인상품</span></h3>

                <article th:each="product:${discountProduct}">
                    <a th:href="@{/product/view(pno=${product.pno})}">
                        <div class="thumb">
                            <img th:src="@{|/product/${product.cate}/${product.mainimg}|}" alt="상품이미지">
                        </div>
                        <h2>[[${product.pname}]]</h2>
                        <p>[[${product.info}]]</p>
                        <div class="org_price">
                            <del>[[${#numbers.formatInteger(product.price, 0, 'COMMA')}]]</del>
                            <span>[[${#numbers.formatInteger(product.discount, 0, 'COMMA')}]]%</span>
                        </div>
                        <div class="dis_price">
                            <ins>[[${#numbers.formatInteger(product.price * (1 - product.discount / 100.0), 0, 'COMMA')}]]</ins>
                            <span th:if="${product.deliprice == 0}" class="free">무료배송</span>
                        </div>
                    </a>
                </article>
            </section>
        </section>
        <button type="button" id="top">TOP</button>
    </body>
</html>