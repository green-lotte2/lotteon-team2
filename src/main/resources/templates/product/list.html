<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/UserLayout}">

    <section class="list" layout:fragment="content">

              <!-- 제목, 페이지 네비게이션 -->
              <nav>
                <h1>상품목록</h1>
                <p>HOME > <span>패션·의류·뷰티</span> > <strong>남성의류</strong></p>
              </nav>


        <!-- 정렬 메뉴 -->
        <ul class="sort">
            <li><a th:href="@{/product/list(list='?', order='desc')}">판매많은순</a></li> <!--order 많은순-->
            <li><a th:href="@{/product/list(list='price', order='asc')}">낮은가격순</a></li>
            <li><a th:href="@{/product/list(list='price', order='desc')}">높은가격순</a></li>
            <li><a th:href="@{/product/list(list='?', order='desc')}">평점높은순</a></li> <!--별점 높은순-->
            <li><a th:href="@{/product/list(list='?', order='desc')}">후기많은순</a></li> <!--review 많은순-->
            <li><a th:href="@{/product/list(list='rdate', order='desc')}">최근등록순</a></li>
        </ul>


        <!-- 상품목록 -->
              <table border="0">
                  <tr th:each="product : ${products}">
                      <td>
                          <a th:href="@{/product/view(pno=${product.pno})}" class="thumb">
                              <img th:src="@{|/product/${product.cate}/${product.mainimg}|}" alt="상품이미지">
                          </a>
                      </td>
                      <td>
                          <h3 class="name" th:text="${product.pname}">상품명</h3>
                          <a th:href="@{/product/view(pno=${product.pno})}" class="desc" th:text="${product.info}">상품설명</a>
                      </td>
                      <td>
                          <ul>
                              <li>
                                  <!-- 할인된 가격을 계산하고 콤마 포맷을 적용합니다. -->
                                  <ins class="dis-price" th:text="${#numbers.formatInteger((product.price * (1 - product.discount / 100.0)), 3, 'COMMA')}">할인된 가격</ins>
                              </li>
                              <li>
                                  <!-- 원래 가격에 콤마 포맷을 적용합니다. -->
                                  <del class="org-price" th:text="${#numbers.formatInteger(product.price, 3, 'COMMA') + '원'}">30,000</del>
                                  <!-- 할인율 -->
                                  <span class="discount" th:text="${product.discount + '%'}">10%</span>
                              </li>
                              <li>
                                  <!-- 무료 배송 여부를 표시합니다. -->
                                  <span class="free-delivery">무료배송</span>
                              </li>
                          </ul>
                      </td>
                      <td>
                          <!-- 회사 (판매자 정보) -->
                          <h4 class="seller" th:text="${product.company}"><i class="fas fa-home"></i>판매자</h4>
                          <!-- 판매자 등급 및 평점은 데모 데이터이며, 실제 필드가 없습니다. -->
                          <h5 class="badge power">판매자등급</h5>
                          <h6 class="rating star2">상품평</h6>
                      </td>
                  </tr>
              </table>


        <!-- 상품목록 페이지번호 -->
        <div class="paging">
            <!-- 이전 페이지 링크 -->
            <span class="prev">
        <a th:if="${result.pg > 1}" th:href="@{/product/list(cate=${result.cate}, pg=${result.pg - 1})}">&lt;&nbsp;이전</a>
    </span>

            <!-- 숫자 페이지 링크 -->
            <span class="num">
        <a th:each="pageNum : ${#numbers.sequence(result.start, result.end)}"
           th:href="@{/product/list(cate=${result.cate}, pg=${pageNum})}"
           th:text="${pageNum}"
           th:class="${pageNum == result.pg ? 'on' : ''}"></a>
    </span>

            <!-- 다음 페이지 링크 -->
            <span class="next">
        <a th:if="${result.pg < result.totalPage}" th:href="@{/product/list(cate=${result.cate}, pg=${result.pg + 1})}">다음&nbsp;&gt;</a>
    </span>
        </div>


    </section>
</html>